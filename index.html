<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Caisse Loto â€” FC des Nestes</title>

  <style>
    html { -webkit-text-size-adjust: 100%; }
    html, body { width: 100%; height: 100%; }

    :root{
      --bg: #f6f7f9;
      --card: #ffffff;
      --border: #e5e7eb;

      --neutral: #9ca3af;
      --neutralBg: #f3f4f6;

      --blue: #2563eb;
      --blueBg: #eef6ff;

      --green: #16a34a;
      --greenBg: #eefcf2;

      --dark: #0b1220;

      /* âœ… Version compacte */
      --btn: 34px;
      --valW: 40px;
      --rowPadY: 5px;
      --rowPadX: 8px;
      --radius: 13px;

      --h1: 17px;
      --h3: 13px;
      --label: 13px;
      --price: 13px;
      --total: 23px;

      --bottomBarSpace: 150px;
    }

    @media (max-width: 380px){
      :root{
        --btn: 32px;
        --valW: 38px;
        --h1: 16px;
        --h3: 12px;
        --label: 12px;
        --price: 12px;
        --total: 22px;
        --bottomBarSpace: 155px;
      }
    }

    body{
      margin:0;
      background: var(--bg);
      font-family: Arial, Helvetica, sans-serif;
    }
    * { -webkit-tap-highlight-color: transparent; }

    .wrap{
      padding: 8px;
      padding-bottom: calc(var(--bottomBarSpace) + env(safe-area-inset-bottom));
      min-height: 100%;
      box-sizing: border-box;
    }

    .card{
      width: 100%;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 6px 20px rgba(0,0,0,.08);
      padding: 8px;
      box-sizing: border-box;
    }

    h1{
      margin: 0 0 6px 0;
      font-size: var(--h1);
      line-height: 1.15;
    }

    .section{
      border-radius: var(--radius);
      padding: 6px;
      margin-top: 6px;
      border: 1px solid var(--border);
    }

    .section h3{
      margin: 0 0 6px 0;
      font-size: var(--h3);
      display: flex;
      align-items: center;
      gap: 6px;
      line-height: 1.1;
    }

    .badge{
      font-size: 10px;
      font-weight: 900;
      padding: 3px 8px;
      border-radius: 999px;
      letter-spacing: .2px;
      color: #fff;
      white-space: nowrap;
    }

    .norm{ background: var(--neutralBg); }
    .norm .badge{ background:#374151; }

    .spec{ background: var(--blueBg); border-color:#cfe6ff; }
    .spec .badge{ background: var(--blue); }
    .spec h3{ color: var(--blue); }

    .tomb{ background: var(--greenBg); border-color:#ccefd8; }
    .tomb .badge{ background: var(--green); }
    .tomb h3{ color: #15803d; }

    .list{
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .item{
      display:flex;
      align-items:center;
      gap: 8px;
      background:#fff;
      border: 1px solid var(--border);
      border-radius: 11px;
      padding: var(--rowPadY) var(--rowPadX);
      box-sizing: border-box;
    }

    .item.normRow{ border-left: 5px solid var(--neutral); }
    .item.specRow{ border-left: 5px solid var(--blue); }
    .item.tombRow{ border-left: 5px solid var(--green); }

    .label{ flex: 1; min-width: 0; }
    .label b{
      display:block;
      font-size: var(--label);
      line-height: 1.08;
    }

    .price{
      font-weight: 900;
      font-size: var(--price);
      white-space: nowrap;
      min-width: 34px;
      text-align: right;
    }

    .qty{
      display:flex;
      align-items:center;
      gap: 6px;
    }

    button{
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
      cursor: pointer;
    }

    .btn{
      width: var(--btn);
      height: var(--btn);
      border: 0;
      border-radius: 10px;
      background: #e5e7eb;
      font-size: 18px;
      font-weight: 900;
      line-height: 1;
      padding: 0;
    }
    .btn:active{ transform: scale(0.98); }

    .val{
      width: var(--valW);
      height: var(--btn);
      border: 1px solid #d0d5dd;
      border-radius: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 16px;
      font-weight: 900;
      background:#fff;
    }

    /* Barre fixe bas */
    .bottom-bar{
      position: fixed;
      left: 8px;
      right: 8px;
      bottom: calc(8px + env(safe-area-inset-bottom));
      display: grid;
      gap: 6px;
      z-index: 999;
    }

    .total-bar{
      background: var(--dark);
      color: #fff;
      border-radius: var(--radius);
      padding: 8px 10px;
      display:flex;
      justify-content: space-between;
      align-items:center;
      box-shadow: 0 -8px 24px rgba(0,0,0,.18);
    }
    .total-bar .amt{
      font-size: var(--total);
      font-weight: 900;
      white-space: nowrap;
    }

    .raz{
      height: 38px;
      border: 0;
      border-radius: var(--radius);
      background: #e5e7eb;
      font-size: 14px;
      font-weight: 900;
    }
    .raz:active{ transform: scale(0.99); }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>ðŸ§¾ Caisse Loto â€” FC des Nestes</h1>

      <div class="section norm">
        <h3><span class="badge">NORMALES</span> Cartons personnels acceptÃ©s</h3>
        <div class="list" id="normal"></div>
      </div>

      <div class="section spec">
        <h3><span class="badge">SPÃ‰CIALES</span> Planches bleues</h3>
        <div class="list" id="spec"></div>
      </div>

      <div class="section tomb">
        <h3><span class="badge">TOMBOLA</span> Tickets</h3>
        <div class="list" id="tombola"></div>
      </div>
    </div>
  </div>

  <div class="bottom-bar">
    <div class="total-bar">
      <div>Total Ã  payer</div>
      <div class="amt" id="total">0 â‚¬</div>
    </div>
    <button class="raz" id="raz">Remise Ã  zÃ©ro</button>
  </div>

<script>
  const itemsNormal = [
    { id:"c1",  label:"1 carton", price:3 },
    { id:"n6",  label:"Planche 6 cartons", price:10 },
    { id:"n12", label:"Planche 12 cartons", price:15 },
    { id:"n18", label:"Planche 18 cartons", price:20 },
    { id:"n24", label:"Planche 24 cartons", price:25 },
  ];

  const itemsSpec = [
    { id:"s3", label:"Planche 3 cartons", price:3 },
    { id:"s6", label:"Planche 6 cartons", price:6 },
  ];

  const itemsTombola = [
    { id:"t1", label:"1 ticket", price:2 },
    { id:"t3", label:"3 tickets", price:5 },
    { id:"t7", label:"7 tickets", price:10 },
  ];

  const allItems = [...itemsNormal, ...itemsSpec, ...itemsTombola];
  const state = Object.fromEntries(allItems.map(i => [i.id, 0]));

  function renderItem(it, cssRow){
    return `
      <div class="item ${cssRow}">
        <div class="label"><b>${it.label}</b></div>
        <div class="price">${it.price}â‚¬</div>
        <div class="qty">
          <button class="btn" type="button" data-act="dec" data-id="${it.id}" aria-label="Moins">âˆ’</button>
          <div class="val" id="val-${it.id}">0</div>
          <button class="btn" type="button" data-act="inc" data-id="${it.id}" aria-label="Plus">+</button>
        </div>
      </div>
    `;
  }

  document.getElementById("normal").innerHTML  = itemsNormal.map(i => renderItem(i, "normRow")).join("");
  document.getElementById("spec").innerHTML    = itemsSpec.map(i => renderItem(i, "specRow")).join("");
  document.getElementById("tombola").innerHTML = itemsTombola.map(i => renderItem(i, "tombRow")).join("");

  function calc(){
    let total = 0;
    for (const it of allItems) total += state[it.id] * it.price;
    document.getElementById("total").textContent = total + " â‚¬";
  }

  function update(id){
    document.getElementById("val-" + id).textContent = state[id];
    calc();
  }

  document.addEventListener("click", (e) => {
    const btn = e.target.closest("button[data-act]");
    if (!btn) return;

    const id = btn.dataset.id;
    const act = btn.dataset.act;

    if (act === "inc") state[id] += 1;
    if (act === "dec") state[id] = Math.max(0, state[id] - 1);

    update(id);
  });

  document.getElementById("raz").addEventListener("click", () => {
    for (const k in state) state[k] = 0;
    for (const k in state) {
      const el = document.getElementById("val-" + k);
      if (el) el.textContent = "0";
    }
    calc();
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  calc();
</script>
</body>
</html>

