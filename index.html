<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <!-- iPhone : empÃªche le zoom au double-tap -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Caisse Loto â€” FC des Nestes</title>

  <style>
    html { -webkit-text-size-adjust: 100%; }
    html, body { width: 100%; height: 100%; }

    :root{
      --bg: #f6f7f9;
      --card: #ffffff;
      --border: #e5e7eb;

      --neutral: #9ca3af;     /* gris */
      --neutralBg: #f3f4f6;

      --blue: #2563eb;        /* bleu */
      --blueBg: #eef6ff;

      --dark: #0b1220;

      --btn: 44px;            /* boutons +/âˆ’ */
      --valW: 56px;
      --rowPadY: 10px;
      --rowPadX: 10px;
      --radius: 14px;

      --h1: 22px;
      --h3: 16px;
      --label: 16px;
      --price: 16px;
      --total: 30px;
    }

    @media (max-width: 380px){
      :root{
        --h1: 20px;
        --label: 15px;
        --price: 15px;
        --total: 28px;
        --btn: 42px;
        --valW: 52px;
      }
    }

    body{
      margin:0;
      background: var(--bg);
      font-family: Arial, Helvetica, sans-serif;
    }

    /* Ã©vite sur iOS la surbrillance + certains comportements */
    * { -webkit-tap-highlight-color: transparent; }

    .wrap{
      padding: 12px;
      padding-bottom: 16px;
      min-height: 100%;
      box-sizing: border-box;
    }

    .card{
      width: 100%;
      max-width: none;
      margin: 0;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 6px 20px rgba(0,0,0,.08);
      padding: 12px;
      box-sizing: border-box;
    }

    h1{
      margin: 0 0 10px 0;
      font-size: var(--h1);
      line-height: 1.2;
    }

    .section{
      border-radius: var(--radius);
      padding: 10px;
      margin-top: 10px;
      border: 1px solid var(--border);
    }

    .section h3{
      margin: 0 0 10px 0;
      font-size: var(--h3);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge{
      font-size: 12px;
      font-weight: 900;
      padding: 4px 10px;
      border-radius: 999px;
      letter-spacing: .4px;
      color: #fff;
      white-space: nowrap;
    }

    .norm{ background: var(--neutralBg); }
    .norm .badge{ background:#374151; }

    .spec{ background: var(--blueBg); border-color:#cfe6ff; }
    .spec .badge{ background: var(--blue); }
    .spec h3{ color: var(--blue); }

    .list{
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .item{
      display:flex;
      align-items:center;
      gap: 10px;
      background:#fff;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: var(--rowPadY) var(--rowPadX);
      box-sizing: border-box;
    }
    .item.normRow{ border-left: 7px solid var(--neutral); }
    .item.specRow{ border-left: 7px solid var(--blue); }

    .label{
      flex: 1;
      min-width: 0;
    }
    .label b{
      display:block;
      font-size: var(--label);
      line-height: 1.15;
    }

    .price{
      font-weight: 900;
      font-size: var(--price);
      white-space: nowrap;
    }

    .qty{
      display:flex;
      align-items:center;
      gap: 8px;
    }

    .btn, .raz, button{
      touch-action: manipulation;     /* iOS: Ã©vite le double-tap zoom */
      -webkit-user-select: none;      /* pas de sÃ©lection */
      user-select: none;
    }

    .btn{
      width: var(--btn);
      height: var(--btn);
      border: 0;
      border-radius: 12px;
      background: #e5e7eb;
      font-size: 22px;
      font-weight: 900;
      line-height: 1;
      cursor: pointer;
    }
    .btn:active{ transform: scale(0.98); }

    .val{
      width: var(--valW);
      height: var(--btn);
      border: 1px solid #d0d5dd;
      border-radius: 12px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 18px;
      font-weight: 900;
      background:#fff;
    }

    .sticky-total{
      position: sticky;
      bottom: 0;
      margin-top: 12px;
      background: var(--dark);
      color: #fff;
      border-radius: var(--radius);
      padding: 12px 14px;
      display:flex;
      justify-content: space-between;
      align-items:center;
      box-shadow: 0 -8px 24px rgba(0,0,0,.18);
    }
    .sticky-total .amt{
      font-size: var(--total);
      font-weight: 900;
      white-space: nowrap;
    }

    .btns{
      margin-top: 10px;
    }
    .raz{
      width: 100%;
      height: 46px;
      border: 0;
      border-radius: 14px;
      background: #e5e7eb;
      font-size: 16px;
      font-weight: 900;
      cursor: pointer;
    }
    .raz:active{ transform: scale(0.99); }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>ðŸ§¾ Caisse Loto â€” FC des Nestes</h1>

      <div class="section norm">
        <h3><span class="badge">NORMALES</span> Cartons personnels acceptÃ©s</h3>
        <div class="list" id="normal"></div>
      </div>

      <div class="section spec">
        <h3><span class="badge">SPÃ‰CIALES</span> Planches bleues</h3>
        <div class="list" id="spec"></div>
      </div>

      <div class="sticky-total">
        <div>Total Ã  payer</div>
        <div class="amt" id="total">0 â‚¬</div>
      </div>

      <div class="btns">
        <button class="raz" id="raz">Remise Ã  zÃ©ro</button>
      </div>
    </div>
  </div>

<script>
  const itemsNormal = [
    { id:"c1",  label:"1 carton", price:3 },
    { id:"n6",  label:"Planche 6 cartons", price:10 },
    { id:"n12", label:"Planche 12 cartons", price:15 },
    { id:"n18", label:"Planche 18 cartons", price:20 },
    { id:"n24", label:"Planche 24 cartons", price:25 },
  ];

  const itemsSpec = [
    { id:"s3", label:"Planche 3 cartons", price:3 },
    { id:"s6", label:"Planche 6 cartons", price:6 },
  ];

  const state = Object.fromEntries([...itemsNormal, ...itemsSpec].map(i => [i.id, 0]));

  function renderItem(it, cssRow){
    return `
      <div class="item ${cssRow}">
        <div class="label"><b>${it.label}</b></div>
        <div class="price">${it.price}â‚¬</div>
        <div class="qty">
          <button class="btn" data-act="dec" data-id="${it.id}" aria-label="Moins">âˆ’</button>
          <div class="val" id="val-${it.id}">0</div>
          <button class="btn" data-act="inc" data-id="${it.id}" aria-label="Plus">+</button>
        </div>
      </div>
    `;
  }

  document.getElementById("normal").innerHTML = itemsNormal.map(it => renderItem(it, "normRow")).join("");
  document.getElementById("spec").innerHTML   = itemsSpec.map(it => renderItem(it, "specRow")).join("");

  function calc(){
    let total = 0;
    for (const it of itemsNormal) total += state[it.id] * it.price;
    for (const it of itemsSpec) total += state[it.id] * it.price;
    document.getElementById("total").textContent = total + " â‚¬";
  }

  function update(id){
    document.getElementById("val-" + id).textContent = state[id];
    calc();
  }

  document.addEventListener("click", (e) => {
    const btn = e.target.closest("button[data-act]");
    if (!btn) return;
    const id = btn.dataset.id;
    const act = btn.dataset.act;

    if (act === "inc") state[id] += 1;
    if (act === "dec") state[id] = Math.max(0, state[id] - 1);

    update(id);
  });

  // iOS : bloque le zoom au double-tap (safety net)
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function (event) {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) event.preventDefault();
    lastTouchEnd = now;
  }, { passive: false });

  document.getElementById("raz").addEventListener("click", () => {
    for (const k in state) state[k] = 0;
    for (const k in state) document.getElementById("val-" + k).textContent = "0";
    calc();
  });

  calc();
</script>
</body>
</html>
